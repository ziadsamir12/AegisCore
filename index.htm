
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AegisCore - Advanced Home Security Intelligence System</title>
    <meta name="description" content="Comprehensive home security system with water, flame, gas, and motion sensors with real-time monitoring">
    <link rel="icon" href="/Gemini_Generated_Image_kevgvmkevgvmkevg.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
    /* Modern Dark Theme with Better Contrast */
    :root {
        --primary: #00b4d8;
        --primary-dark: #0096c7;
        --primary-light: #90e0ef;
        --background-dark: #22cbd1a8;
        --background-medium: #4b5c8bc5;
        --background-light: #037559;
        --card-bg: rgba(255, 255, 255, 0.055);
        --text-primary: #000000;
        --text-secondary: #e0e0e0;
        --text-muted: #a0a0b0;
        --border-color: rgba(0, 180, 216, 0.3);
    }
    
    body {
        background: linear-gradient(135deg, 
            var(--background-dark) 0%, 
            var(--background-medium) 50%, 
            var(--background-light) 100%);
        min-height: 100vh;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: var(--text-primary);
        padding: 20px;
    }
    
    .brand-logo {
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(45deg, var(--primary), var(--primary-light));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 30px rgba(0, 180, 216, 0.5);
    }
    
    .cyber-glow {
        color: var(--primary);
        text-shadow: 0 0 10px var(--primary), 0 0 20px rgba(0, 180, 216, 0.3);
    }
    
    /* Cards */
    .sensor-card, .main-card {
        background: var(--card-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--border-color);
        border-radius: 15px;
        transition: all 0.3s ease;
        height: 100%;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .sensor-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0, 180, 216, 0.2);
        border-color: var(--primary);
    }
    
    /* Text Styles */
    h1, h2, h3, h4, h5, h6 {
        color: var(--text-primary);
        font-weight: 600;
    }
    
    .text-light {
        color: var(--text-secondary) !important;
    }
    
    .opacity-75 {
        opacity: 0.9 !important;
    }
    
    /* Status Badges */
    .alert-status {
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: bold;
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    /* Connection Badge */
    .connection-badge {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }
    
    /* Navigation Tabs */
    .nav-tabs {
        border-bottom: 1px solid var(--border-color);
    }
    
    .nav-tabs .nav-link {
        color: var(--text-secondary);
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid transparent;
        border-radius: 10px 10px 0 0;
        margin: 0 5px;
        transition: all 0.3s ease;
    }
    
    .nav-tabs .nav-link:hover {
        color: var(--primary);
        background: rgba(0, 180, 216, 0.1);
    }
    
    .nav-tabs .nav-link.active {
        color: var(--primary);
        background: rgba(0, 180, 216, 0.15);
        border-color: var(--border-color);
        border-bottom-color: transparent;
    }
    
    /* Form Controls */
    .form-control, .form-select {
        background: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        color: var(--text-primary) !important;
        transition: all 0.3s ease;
    }
    
    .form-control:focus, .form-select:focus {
        background: rgba(255, 255, 255, 0.15) !important;
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 0.25rem rgba(0, 180, 216, 0.25) !important;
        color: var(--text-primary) !important;
    }
    
    /* RTC Data */
    .rtc-data {
        background: rgba(0, 180, 216, 0.1);
        border-radius: 10px;
        padding: 15px;
        font-family: 'Courier New', monospace;
        font-size: 1rem;
        border: 1px solid var(--border-color);
        color: var(--text-primary);
    }
    
    /* Data Tables */
    .data-table {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid var(--border-color);
    }
    
    .data-table th {
        background: rgba(0, 180, 216, 0.2);
        color: var(--text-primary);
        font-weight: 600;
        border: none;
    }
    
    .data-table td {
        color: var(--text-secondary);
        border-color: rgba(255, 255, 255, 0.1);
    }
    
    .data-table tbody tr:hover {
        background: rgba(0, 180, 216, 0.05);
    }
    
    /* Buttons */
    .btn {
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .btn-outline-light {
        border-color: rgba(255, 255, 255, 0.3);
        color: var(--text-secondary);
    }
    
    .btn-outline-light:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.5);
        color: var(--text-primary);
    }
    
    /* Notification Toast */
    .notification-toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1050;
        border-radius: 10px;
        overflow: hidden;
    }
    
    /* Sensor Values */
    .sensor-value {
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    /* Scrollbar Styling */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    
    ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary-light);
    }
</style>
</head>
<body>
    <div class="container py-4">
        <!-- Connection Status Badge -->
        <div class="connection-badge">
            <span id="connectionStatus" class="badge bg-danger">
                <i class="fas fa-wifi"></i> Disconnected
            </span>
        </div>

        <!-- Brand Header -->
        <div class="text-center mb-4">
            <h1 class="brand-logo display-3 fw-bold mb-2" id="brandLogo" data-animate-child>
                <i class="fas fa-shield-alt"></i>
                AEGISCORE
            </h1>
            <p class="text-light opacity-75" data-animate-child>Advanced Home Security Intelligence System</p>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs justify-content-center mb-4" id="mainTabs" role="tablist" data-animate-child>
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab">
                    <i class="fas fa-home"></i> Dashboard
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="data-tab" data-bs-toggle="tab" data-bs-target="#data" type="button" role="tab">
                    <i class="fas fa-database"></i> Data Analytics
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="sensors-tab" data-bs-toggle="tab" data-bs-target="#sensors" type="button" role="tab">
                    <i class="fas fa-microchip"></i> Sensor Details
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="mainTabsContent">
            <!-- Home Tab -->
            <div class="tab-pane fade show active" id="home" role="tabpanel">
                <!-- System Status -->
                <div class="row mb-4" data-animate-child>
                    <div class="col-md-6">
                        <div class="card sensor-card" data-animate-child>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-link"></i> System Status
                                </h5>
                                <div id="systemStatus">
                                    <p class="mb-1">MQTT: <span id="mqttStatus" class="alert-status bg-secondary">Connecting...</span></p>
                                    <p class="mb-1">SEEN: <span id="seenStatus" class="alert-status bg-secondary">Loading...</span></p>
                                </div>
                                <button id="toggleSeen" class="btn btn-success btn-sm mt-2" disabled>
                                    <i class="fas fa-eye"></i> Enable SEEN
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card sensor-card" data-animate-child>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-clock"></i> Live Sensor Data
                                </h5>
                                <div class="rtc-data">
                                    <div id="rtcData">Waiting for data...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Sensors -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h4 class="mb-3 cyber-glow" data-animate-child>
                            <i class="fas fa-sensor-triangle-exclamation"></i> Security Sensors
                        </h4>
                    </div>

                    <!-- Water Sensor -->
                    <div class="col-md-3 col-6 mb-3">
                        <div id="waterSensorCard" class="card sensor-card" data-animate-child>
                            <div class="card-body text-center">
                                <i class="fas fa-tint fa-2x mb-2 text-primary"></i>
                                <h6>Water Sensor</h6>
                                <div class="sensor-value display-6 fw-bold text-primary" id="waterValue">0</div>
                                <div class="sensor-status">
                                    <span id="waterStatus" class="alert-status bg-success">Normal</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Flame Sensor -->
                    <div class="col-md-3 col-6 mb-3">
                        <div id="flameSensorCard" class="card sensor-card" data-animate-child>
                            <div class="card-body text-center">
                                <i class="fas fa-fire fa-2x mb-2 text-danger"></i>
                                <h6>Flame Sensor</h6>
                                <div class="sensor-value display-6 fw-bold text-danger" id="flameValue">0</div>
                                <div class="sensor-status">
                                    <span id="flameStatus" class="alert-status bg-success">Normal</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Gas Sensor -->
                    <div class="col-md-3 col-6 mb-3">
                        <div id="gasSensorCard" class="card sensor-card" data-animate-child>
                            <div class="card-body text-center">
                                <i class="fas fa-wind fa-2x mb-2 text-success"></i>
                                <h6>Gas Sensor</h6>
                                <div class="sensor-value display-6 fw-bold text-success" id="gasValue">0</div>
                                <div class="sensor-status">
                                    <span id="gasStatus" class="alert-status bg-success">Normal</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Temperature -->
                    <div class="col-md-3 col-6 mb-3">
                        <div id="tempSensorCard" class="card sensor-card" data-animate-child>
                            <div class="card-body text-center">
                                <i class="fas fa-thermometer-half fa-2x mb-2 text-warning"></i>
                                <h6>Temperature</h6>
                                <div class="sensor-value display-6 fw-bold text-warning" id="tempValue">0Â°C</div>
                                <div class="sensor-status">
                                    <span id="fanStatus" class="alert-status bg-success">Normal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security System & Valve Control -->
                <div class="row">
                    <!-- Security System -->
                    <div class="col-md-6 mb-4">
                        <div class="card sensor-card" data-animate-child>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-shield-alt"></i> Security System
                                </h5>
                                <div class="mb-3">
                                    <p class="mb-1">PIR Status:
                                        <span id="pirStatus" class="alert-status bg-secondary">Unknown</span>
                                    </p>
                                    <p class="mb-1">Motion:
                                        <span id="motionStatus" class="alert-status bg-secondary">Loading...</span>
                                    </p>
                                    <p class="mb-1">PIR Sensor:
                                        <span id="pirSensorStatus" class="alert-status bg-secondary">Loading...</span>
                                    </p>
                                </div>
                                <div class="btn-group w-100 mb-2" role="group">
                                    <button id="armPir" class="btn btn-danger">
                                        <i class="fas fa-lock"></i> Arm System
                                    </button>
                                    <button id="disarmPir" class="btn btn-success">
                                        <i class="fas fa-lock-open"></i> Disarm
                                    </button>
                                </div>
                                <div class="btn-group w-100" role="group">
                                    <button id="enablePir" class="btn btn-outline-info">
                                        <i class="fas fa-eye"></i> Enable PIR
                                    </button>
                                    <button id="disablePir" class="btn btn-outline-warning">
                                        <i class="fas fa-eye-slash"></i> Disable PIR
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Valve Control -->
                    <div class="col-md-6 mb-4">
                        <div class="card sensor-card" data-animate-child>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-toggle-on"></i> Valve Control
                                </h5>

                                <!-- Water Valve -->
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Water Valve:</span>
                                        <span id="waterValveStatus" class="alert-status bg-success">OPEN</span>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button id="openWaterValve" class="btn btn-outline-success btn-sm">
                                            <i class="fas fa-faucet"></i> Open
                                        </button>
                                        <button id="closeWaterValve" class="btn btn-outline-danger btn-sm">
                                            <i class="fas fa-faucet-drip"></i> Close
                                        </button>
                                    </div>
                                </div>

                                <!-- Gas Valve -->
                                <div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Gas Valve:</span>
                                        <span id="gasValveStatus" class="alert-status bg-success">OPEN</span>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button id="openGasValve" class="btn btn-outline-success btn-sm">
                                            <i class="fas fa-fire"></i> Open
                                        </button>
                                        <button id="closeGasValve" class="btn btn-outline-danger btn-sm">
                                            <i class="fas fa-fire-extinguisher"></i> Close
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sensors Control (Enable / Disable) -->
                <div class="row">
                    <div class="col-md-12 mb-4">
                        <div class="card sensor-card" data-animate-child>
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-sliders-h"></i> Sensors Control
                                </h5>

                                <!-- Water Sensor Control -->
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Water Sensor:</span>
                                        <span id="waterSensorToggleStatus" class="alert-status bg-secondary">
                                            <i class="fas fa-lock"></i> Disabled
                                        </span>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button id="enableWaterSensor" class="btn btn-outline-success btn-sm">
                                            <i class="fas fa-check-circle"></i> Enable
                                        </button>
                                        <button id="disableWaterSensor" class="btn btn-outline-danger btn-sm">
                                            <i class="fas fa-ban"></i> Disable
                                        </button>
                                    </div>
                                </div>

                                <!-- Flame Sensor Control -->
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Flame Sensor:</span>
                                        <span id="flameSensorToggleStatus" class="alert-status bg-secondary">
                                            <i class="fas fa-lock"></i> Disabled
                                        </span>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button id="enableFlameSensor" class="btn btn-outline-success btn-sm">
                                            <i class="fas fa-check-circle"></i> Enable
                                        </button>
                                        <button id="disableFlameSensor" class="btn btn-outline-danger btn-sm">
                                            <i class="fas fa-ban"></i> Disable
                                        </button>
                                    </div>
                                </div>

                                <!-- Gas Sensor Control -->
                                <div>
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span>Gas Sensor:</span>
                                        <span id="gasSensorToggleStatus" class="alert-status bg-secondary">
                                            <i class="fas fa-lock"></i> Disabled
                                        </span>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button id="enableGasSensor" class="btn btn-outline-success btn-sm">
                                            <i class="fas fa-check-circle"></i> Enable
                                        </button>
                                        <button id="disableGasSensor" class="btn btn-outline-danger btn-sm">
                                            <i class="fas fa-ban"></i> Disable
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div><!-- end home tab -->

            <!-- Data Analytics Tab -->
            <div class="tab-pane fade" id="data" role="tabpanel">
                <div class="card main-card" id="dataMainCard">
                    <div class="card-body">
                        <h4 class="mb-4 cyber-glow" data-animate-child>
                            <i class="fas fa-chart-line"></i> Data Analytics & History
                        </h4>

                        <!-- Date + Type + Resolution -->
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <label class="form-label">Select Date:</label>
                                <input type="date" id="dateSelector" class="form-control bg-dark text-light">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Data Type:</label>
                                <select id="dataTypeSelector" class="form-select bg-dark text-light">
                                    <option value="all">All Data</option>
                                    <option value="water">Water Sensor</option>
                                    <option value="flame">Flame Sensor</option>
                                    <option value="gas">Gas Sensor</option>
                                    <option value="temperature">Temperature</option>
                                    <option value="motion">Motion Events</option>
                                    <option value="alerts">Security Alerts</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Chart Resolution:</label>
                                <select id="chartResolution" class="form-select bg-dark text-light">
                                    <option value="raw">Every reading</option>
                                    <option value="minute">Per minute (avg)</option>
                                    <option value="hour">Per hour (avg)</option>
                                    <option value="day">Per day (avg)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Summary Cards -->
                        <div class="row mb-4">
                            <div class="col-md-3 col-6">
                                <div class="card sensor-card text-center" data-animate-child>
                                    <div class="card-body">
                                        <i class="fas fa-tint fa-2x text-primary mb-2"></i>
                                        <h6>Water Alerts</h6>
                                        <div class="display-6 fw-bold text-primary" id="waterAlertsCount">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card sensor-card text-center" data-animate-child>
                                    <div class="card-body">
                                        <i class="fas fa-fire fa-2x text-danger mb-2"></i>
                                        <h6>Flame Alerts</h6>
                                        <div class="display-6 fw-bold text-danger" id="flameAlertsCount">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card sensor-card text-center" data-animate-child>
                                    <div class="card-body">
                                        <i class="fas fa-wind fa-2x text-success mb-2"></i>
                                        <h6>Gas Alerts</h6>
                                        <div class="display-6 fw-bold text-success" id="gasAlertsCount">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="card sensor-card text-center" data-animate-child>
                                    <div class="card-body">
                                        <i class="fas fa-running fa-2x text-warning mb-2"></i>
                                        <h6>Motion Events</h6>
                                        <div class="display-6 fw-bold text-warning" id="motionEventsCount">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Data Table -->
                        <div class="data-table">
                            <div class="table-responsive">
                                <table class="table table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th>Time</th>
                                            <th>Sensor</th>
                                            <th>Value</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="dataTableBody">
                                        <tr>
                                            <td colspan="5" class="text-center">No data available</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- end data tab -->

            <!-- Sensor Details Tab -->
            <div class="tab-pane fade" id="sensors" role="tabpanel">
                <div class="card main-card">
                    <div class="card-body">
                        <h4 class="mb-4 cyber-glow" data-animate-child>
                            <i class="fas fa-microchip"></i> Individual Sensor Data
                        </h4>

                        <ul class="nav nav-tabs mb-4" id="sensorTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="water-tab" data-bs-toggle="tab" data-bs-target="#waterSensor" type="button">
                                    <i class="fas fa-tint"></i> Water Sensor
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="flame-tab" data-bs-toggle="tab" data-bs-target="#flameSensor" type="button">
                                    <i class="fas fa-fire"></i> Flame Sensor
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="gas-tab" data-bs-toggle="tab" data-bs-target="#gasSensor" type="button">
                                    <i class="fas fa-wind"></i> Gas Sensor
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="temp-tab" data-bs-toggle="tab" data-bs-target="#tempSensor" type="button">
                                    <i class="fas fa-thermometer-half"></i> Temperature
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="motion-tab" data-bs-toggle="tab" data-bs-target="#motionSensor" type="button">
                                    <i class="fas fa-running"></i> Motion Sensor
                                </button>
                            </li>
                        </ul>

                        <div class="tab-content" id="sensorTabsContent">
                            <!-- Water -->
                            <div class="tab-pane fade show active" id="waterSensor" role="tabpanel">
                                <div class="sensor-chart">
                                    <h5><i class="fas fa-tint text-primary"></i> Water Sensor History</h5>
                                    <canvas id="waterChart" height="100"></canvas>
                                    <button class="btn btn-sm btn-outline-light mt-2" data-download-chart="water">
                                        <i class="fas fa-download"></i> Download as Image
                                    </button>
                                </div>
                                <div class="data-table">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Value</th>
                                                    <th>Status</th>
                                                    <th>Valve Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="waterSensorData"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Flame -->
                            <div class="tab-pane fade" id="flameSensor" role="tabpanel">
                                <div class="sensor-chart">
                                    <h5><i class="fas fa-fire text-danger"></i> Flame Sensor History</h5>
                                    <canvas id="flameChart" height="100"></canvas>
                                    <button class="btn btn-sm btn-outline-light mt-2" data-download-chart="flame">
                                        <i class="fas fa-download"></i> Download as Image
                                    </button>
                                </div>
                                <div class="data-table">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Value</th>
                                                    <th>Status</th>
                                                    <th>Valve Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="flameSensorData"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Gas -->
                            <div class="tab-pane fade" id="gasSensor" role="tabpanel">
                                <div class="sensor-chart">
                                    <h5><i class="fas fa-wind text-success"></i> Gas Sensor History</h5>
                                    <canvas id="gasChart" height="100"></canvas>
                                    <button class="btn btn-sm btn-outline-light mt-2" data-download-chart="gas">
                                        <i class="fas fa-download"></i> Download as Image
                                    </button>
                                </div>
                                <div class="data-table">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Value</th>
                                                    <th>Status</th>
                                                    <th>Valve Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="gasSensorData"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Temp -->
                            <div class="tab-pane fade" id="tempSensor" role="tabpanel">
                                <div class="sensor-chart">
                                    <h5><i class="fas fa-thermometer-half text-warning"></i> Temperature History</h5>
                                    <canvas id="tempChart" height="100"></canvas>
                                    <button class="btn btn-sm btn-outline-light mt-2" data-download-chart="temp">
                                        <i class="fas fa-download"></i> Download as Image
                                    </button>
                                </div>
                                <div class="data-table">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Temperature</th>
                                                    <th>Fan Status</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tempSensorData"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Motion -->
                            <div class="tab-pane fade" id="motionSensor" role="tabpanel">
                                <div class="sensor-chart">
                                    <h5><i class="fas fa-running text-info"></i> Motion Detection History</h5>
                                    <canvas id="motionChart" height="100"></canvas>
                                    <button class="btn btn-sm btn-outline-light mt-2" data-download-chart="motion">
                                        <i class="fas fa-download"></i> Download as Image
                                    </button>
                                </div>
                                <div class="data-table">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Time</th>
                                                    <th>Motion Detected</th>
                                                    <th>System Status</th>
                                                    <th>Alert Type</th>
                                                </tr>
                                            </thead>
                                            <tbody id="motionSensorData"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div><!-- end sensorTabsContent -->
                    </div>
                </div>
            </div><!-- end sensors tab -->
        </div><!-- end tab content -->
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="notification-toast toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="toastMessage">Alert! Critical issue detected!</span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
    <!-- Theme Selector Sidebar -->
    <div class="theme-sidebar">
        <button class="theme-toggle-btn" id="themeToggleBtn">
            <i class="fas fa-palette"></i>
        </button>
        
        <div class="theme-panel" id="themePanel">
            <h6 class="theme-panel-title">
                <i class="fas fa-fill-drip"></i> Color Themes
            </h6>
            
            <div class="theme-list">
                <!-- Dark Theme -->
                <div class="theme-item" data-theme="dark">
                    <div class="theme-preview dark-theme-preview">
                        <span class="theme-dot" style="background: #0a0a0f;"></span>
                        <span class="theme-dot" style="background: #12121f;"></span>
                        <span class="theme-dot" style="background: #1a1a2e;"></span>
                    </div>
                    <span class="theme-name">Dark</span>
                </div>
                
                <!-- White Theme -->
                <div class="theme-item" data-theme="white">
                    <div class="theme-preview white-theme-preview">
                        <span class="theme-dot" style="background: #ffffff;"></span>
                        <span class="theme-dot" style="background: #f8f9fa;"></span>
                        <span class="theme-dot" style="background: #e9ecef;"></span>
                    </div>
                    <span class="theme-name">White</span>
                </div>
                
                <!-- Blue Gradient Theme -->
                <div class="theme-item" data-theme="blue">
                    <div class="theme-preview blue-theme-preview">
                        <span class="theme-dot" style="background: #0d47a1;"></span>
                        <span class="theme-dot" style="background: #1565c0;"></span>
                        <span class="theme-dot" style="background: #1976d2;"></span>
                    </div>
                    <span class="theme-name">Blue</span>
                </div>
                
                <!-- Cyan/Teal Theme -->
                <div class="theme-item" data-theme="cyan">
                    <div class="theme-preview cyan-theme-preview">
                        <span class="theme-dot" style="background: #006064;"></span>
                        <span class="theme-dot" style="background: #00838f;"></span>
                        <span class="theme-dot" style="background: #0097a7;"></span>
                    </div>
                    <span class="theme-name">Cyan</span>
                </div>
                
                <!-- Purple Theme -->
                <div class="theme-item" data-theme="purple">
                    <div class="theme-preview purple-theme-preview">
                        <span class="theme-dot" style="background: #4a148c;"></span>
                        <span class="theme-dot" style="background: #6a1b9a;"></span>
                        <span class="theme-dot" style="background: #8e24aa;"></span>
                    </div>
                    <span class="theme-name">Purple</span>
                </div>
                
                <!-- Green Theme -->
                <div class="theme-item" data-theme="green">
                    <div class="theme-preview green-theme-preview">
                        <span class="theme-dot" style="background: #1b5e20;"></span>
                        <span class="theme-dot" style="background: #2e7d32;"></span>
                        <span class="theme-dot" style="background: #388e3c;"></span>
                    </div>
                    <span class="theme-name">Green</span>
                </div>
                
                <!-- Gold/Dark Theme -->
                <div class="theme-item" data-theme="gold">
                    <div class="theme-preview gold-theme-preview">
                        <span class="theme-dot" style="background: #212121;"></span>
                        <span class="theme-dot" style="background: #424242;"></span>
                        <span class="theme-dot" style="background: #616161;"></span>
                    </div>
                    <span class="theme-name">Gold</span>
                </div>
                
                <!-- Pink/Purple Theme -->
                <div class="theme-item" data-theme="pink">
                    <div class="theme-preview pink-theme-preview">
                        <span class="theme-dot" style="background: #880e4f;"></span>
                        <span class="theme-dot" style="background: #ad1457;"></span>
                        <span class="theme-dot" style="background: #c2185b;"></span>
                    </div>
                    <span class="theme-name">Pink</span>
                </div>
                
                <!-- Orange/Black Theme -->
                <div class="theme-item" data-theme="orange">
                    <div class="theme-preview orange-theme-preview">
                        <span class="theme-dot" style="background: #000000;"></span>
                        <span class="theme-dot" style="background: #212121;"></span>
                        <span class="theme-dot" style="background: #424242;"></span>
                    </div>
                    <span class="theme-name">Orange</span>
                </div>
                
                <!-- Ocean Blue Theme -->
                <div class="theme-item" data-theme="ocean">
                    <div class="theme-preview ocean-theme-preview">
                        <span class="theme-dot" style="background: #0d47a1;"></span>
                        <span class="theme-dot" style="background: #1565c0;"></span>
                        <span class="theme-dot" style="background: #1976d2;"></span>
                    </div>
                    <span class="theme-name">Ocean</span>
                </div>
            </div>
            
            <div class="theme-actions">
                <button class="btn btn-sm btn-outline-light w-100" id="resetTheme">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
        </div>
    </div>
    <script>
    // Theme Management
    const themes = {
        dark: {
            '--primary': '#00b4d8',
            '--primary-dark': '#0096c7',
            '--primary-light': '#90e0ef',
            '--background-dark': '#0a0a0f',
            '--background-medium': '#12121f',
            '--background-light': '#1a1a2e',
            '--card-bg': 'rgba(255, 255, 255, 0.05)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#e0e0e0',
            '--text-muted': '#a0a0b0',
            '--border-color': 'rgba(0, 180, 216, 0.3)'
        },
        white: {
            '--primary': '#2c3e50',
            '--primary-dark': '#1a252f',
            '--primary-light': '#3498db',
            '--background-dark': '#ffffff',
            '--background-medium': '#f8f9fa',
            '--background-light': '#e9ecef',
            '--card-bg': '#ffffff',
            '--text-primary': '#2c3e50',
            '--text-secondary': '#495057',
            '--text-muted': '#6c757d',
            '--border-color': '#dee2e6'
        },
        blue: {
            '--primary': '#1e88e5',
            '--primary-dark': '#1565c0',
            '--primary-light': '#64b5f6',
            '--background-dark': '#0d47a1',
            '--background-medium': '#1565c0',
            '--background-light': '#1976d2',
            '--card-bg': 'rgba(255, 255, 255, 0.1)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#e3f2fd',
            '--text-muted': '#bbdefb',
            '--border-color': 'rgba(255, 255, 255, 0.2)'
        },
        cyan: {
            '--primary': '#00bcd4',
            '--primary-dark': '#0097a7',
            '--primary-light': '#4dd0e1',
            '--background-dark': '#006064',
            '--background-medium': '#00838f',
            '--background-light': '#0097a7',
            '--card-bg': 'rgba(255, 255, 255, 0.08)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#e0f7fa',
            '--text-muted': '#b2ebf2',
            '--border-color': 'rgba(0, 188, 212, 0.4)'
        },
        purple: {
            '--primary': '#9c27b0',
            '--primary-dark': '#7b1fa2',
            '--primary-light': '#ba68c8',
            '--background-dark': '#4a148c',
            '--background-medium': '#6a1b9a',
            '--background-light': '#8e24aa',
            '--card-bg': 'rgba(255, 255, 255, 0.07)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#f3e5f5',
            '--text-muted': '#e1bee7',
            '--border-color': 'rgba(156, 39, 176, 0.4)'
        },
        green: {
            '--primary': '#4caf50',
            '--primary-dark': '#388e3c',
            '--primary-light': '#81c784',
            '--background-dark': '#1b5e20',
            '--background-medium': '#2e7d32',
            '--background-light': '#388e3c',
            '--card-bg': 'rgba(255, 255, 255, 0.06)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#e8f5e9',
            '--text-muted': '#c8e6c9',
            '--border-color': 'rgba(76, 175, 80, 0.4)'
        },
        gold: {
            '--primary': '#ff9800',
            '--primary-dark': '#f57c00',
            '--primary-light': '#ffb74d',
            '--background-dark': '#212121',
            '--background-medium': '#424242',
            '--background-light': '#616161',
            '--card-bg': 'rgba(255, 255, 255, 0.05)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#f5f5f5',
            '--text-muted': '#e0e0e0',
            '--border-color': 'rgba(255, 152, 0, 0.4)'
        },
        pink: {
            '--primary': '#e91e63',
            '--primary-dark': '#c2185b',
            '--primary-light': '#f06292',
            '--background-dark': '#880e4f',
            '--background-medium': '#ad1457',
            '--background-light': '#c2185b',
            '--card-bg': 'rgba(255, 255, 255, 0.07)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#fce4ec',
            '--text-muted': '#f8bbd0',
            '--border-color': 'rgba(233, 30, 99, 0.4)'
        },
        orange: {
            '--primary': '#ff5722',
            '--primary-dark': '#e64a19',
            '--primary-light': '#ff8a65',
            '--background-dark': '#000000',
            '--background-medium': '#212121',
            '--background-light': '#424242',
            '--card-bg': 'rgba(255, 87, 34, 0.1)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#fbe9e7',
            '--text-muted': '#ffccbc',
            '--border-color': 'rgba(255, 87, 34, 0.4)'
        },
        ocean: {
            '--primary': '#2196f3',
            '--primary-dark': '#1976d2',
            '--primary-light': '#64b5f6',
            '--background-dark': '#0d47a1',
            '--background-medium': '#1565c0',
            '--background-light': '#1976d2',
            '--card-bg': 'rgba(33, 150, 243, 0.1)',
            '--text-primary': '#ffffff',
            '--text-secondary': '#e3f2fd',
            '--text-muted': '#bbdefb',
            '--border-color': 'rgba(33, 150, 243, 0.4)'
        }
    };

    // Current theme storage
    const STORAGE_KEY = 'aegiscore_theme';

    // Apply theme
    function applyTheme(themeName) {
        const theme = themes[themeName];
        if (!theme) return;
        
        const root = document.documentElement;
        
        // Apply all CSS variables
        Object.keys(theme).forEach(key => {
            root.style.setProperty(key, theme[key]);
        });
        
        // Update active state
        document.querySelectorAll('.theme-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.theme === themeName) {
                item.classList.add('active');
            }
        });
        
        // Save to localStorage
        localStorage.setItem(STORAGE_KEY, themeName);
        
        // Show notification
        showThemeNotification(`Theme changed to ${themeName}`);
    }

    // Show theme notification
    function showThemeNotification(message) {
        // You can use your existing toast system or create a simple one
        if (window.aegisCore && window.aegisCore.showNotification) {
            window.aegisCore.showNotification(message, 'info', 2000);
        } else {
            console.log('Theme:', message);
        }
    }

    // Load saved theme
    function loadSavedTheme() {
        const savedTheme = localStorage.getItem(STORAGE_KEY) || 'dark';
        applyTheme(savedTheme);
    }

    // Reset to default theme
    function resetTheme() {
        applyTheme('dark');
        showThemeNotification('Theme reset to default');
    }

    // Initialize theme system
    document.addEventListener('DOMContentLoaded', function() {
        // Load saved theme
        loadSavedTheme();
        
        // Theme panel toggle
        const themeToggleBtn = document.getElementById('themeToggleBtn');
        const themePanel = document.getElementById('themePanel');
        const resetBtn = document.getElementById('resetTheme');
        
        if (themeToggleBtn && themePanel) {
            themeToggleBtn.addEventListener('click', function() {
                themePanel.classList.toggle('show');
            });
            
            // Close panel when clicking outside
            document.addEventListener('click', function(event) {
                if (!themePanel.contains(event.target) && 
                    !themeToggleBtn.contains(event.target) &&
                    themePanel.classList.contains('show')) {
                    themePanel.classList.remove('show');
                }
            });
        }
        
        // Theme item click events
        document.querySelectorAll('.theme-item').forEach(item => {
            item.addEventListener('click', function() {
                const themeName = this.dataset.theme;
                applyTheme(themeName);
            });
        });
        
        // Reset button
        if (resetBtn) {
            resetBtn.addEventListener('click', resetTheme);
        }
        
        // Make theme functions globally available
        window.applyTheme = applyTheme;
        window.resetTheme = resetTheme;
    });
    </script>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- MQTT.js -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script> 
    <!-- App logic -->
    <script src="app.js"></script>
</body>
</html>